# 실행 컨텍스트

자바스크립트의 동작 원리를 담고 있는 핵심 개념

## 소스코드 타입

- 전역 코드: 전역에 존재하는 소스코드
- 함수 코드: 함수 내부에 존재하는 소스 코드
- eval 코드: 빌트인 전역 함수인 eval 함수에 인수로 전달되어 실행되는 소스코드
- 모듈 코드: 모듈 내부에 존재하는 소스코드

## 실행 컨텍스트 역할

실행 컨텍스트는 식별자(변수, 함수, 클래스 등등)를 등록하고 관리하는 스코프와 **코드 실행 순서 관리를 구현**한 메커니즘

```jsx
// 전역 변수 선언
const x = 1;
const y = 2;

// 함수 정의
function foo(a) {
  // 지역 변수 선언
  const x = 10;
  const y = 20;

  // 메서드 호출
  console.log(a + x + y); // 130
}

// 함수 호출
foo(100);

// 메서드 호출
console.log(x + y); // 3
```

스코프, 식별자, 코드 실행 순서 등의 관리가 필요하다

1. 선언에 의해 생성된 모든 식별자를 스코프를 구분하여 등록하고 상태 변화를 지속적으로 관리할 수 있어야 한다
2. 스코프는 중첩 관계에 의해 스코프 체인을 형성해야 한다

   (= 스코프 체인을 통해 상위 스코프로 이동하며 식별자를 검색할 수 있어야 한다

3. 현재 실행 중인 코드의 실행 순서를 변경할 수 있어야 하며 다시 되돌아갈 수도 있어야 한다.

## 실행 컨텍스트 스택

실행 컨텍스트 스택의 최상위에 존재하는 실행 컨텍스트는 언제나 현재 실행 중인 코드의 실행 컨텍스트

## 렉시컬 환경

식별자와 식별자에 바인딩된 값, 상위 스코프에 대한 참조를 기록하는 자료구조로 실행 컨텍스트를 구성하는 컴포넌트

- 환경 레코드(EnvironmentRecord): 스코프에 포함된 식별자를 등록하고 식별자에 바인딩된 값을 관리하는 저장소
- 외부 렉시컬 환경에 대한 참조(OuterLexicalEnvironmentReference): 상위 스코프(= 해당 실행 컨텍스트를 생성한 소스코드를 포함하는 상위 코드의 렉시컬 환경)
